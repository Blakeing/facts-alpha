<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8" />
    <title>Waiting...</title>
  </head>

  <body>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/oidc-client/1.9.1/oidc-client.min.js"></script>
    <script>
      var mgr = new Oidc.UserManager({
        response_mode: "query",
        userStore: new Oidc.WebStorageStateStore({ store: window.localStorage })
      })
        .signinRedirectCallback()
        .then(function (user) {
          let url = "/";
          if (user.state !== undefined) url = user.state;

          window.location.href = ".." + url;
        })
        .catch(function (err) {
          console.error("Callback error:", err);
          window.location.href = "/";
        });
    </script>
  </body>
</html>
